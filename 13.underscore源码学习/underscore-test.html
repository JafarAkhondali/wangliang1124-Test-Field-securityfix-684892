<!DOCTYPE html>
<head>
	<meta charset="UTF-8">
	<title>测试underscore</title>
	<style>
		
	</style>
</head>
<body>
	<h1>测试underscore</h1>
	<div id="content" style="white-space: pre"></div>
	<script src='underscore-1.8.3-analysis.js'></script>
	<!-- <script src='underscore-min.js'></script> -->
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script> -->
	<script type='text/javascript'>
		window.onload = function() {
			const doc = document
			const title = doc.getElementById('content')
			const collection = doc.getElementsByTagName('script')
			console.log(_([1,2,3]))
			// title.innerHTML = optimizeCb
			// _.each({one: 1, two: 2, three: 3, length: 10}, console.log);
			// _.each(collection, console.log)
			const result  = _.map({one: 1, two: 2, three: 3, length: '10'}, item =>{ if (item > 2) return item }  );
			// const result = _.map({one: 1, two: 2, three: 3}, function(num, key){ return num * 3; });
			// console.log(result);
			// _.map(collection, console.log)
			// var sum = _.reduce([1, 2, 3], function(memo, num){ return memo + num; });
			// var list = [[0, 1], [2, 3], [4, 5, [7, 8]]];
			// var flat = _.reduceRight(list, function(a, b) { 
			// 	console.log(arguments);
			// 	return a.concat(b); 
			// }, []);

			// const r  = _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');

			// console.log(r);

			
			console.log(_.groupBy(['one', 'two', 'three'], 'length'))
			// console.log(_.each())
			// console.log(_.each([1, 2, 3], alert))
			// _.each([1, 2, 3], alert);
			// for(var i in this){
			// 	console.log(i)
			// }
			// 
			console.log(_.first([5, 4, 3, 2, 1], 4));
			console.log(_.isNumber(new Number(0)))

			var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString', 'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];

			function collectNonEnumProps(obj, keys) {
			  var nonEnumIdx = nonEnumerableProps.length;
			  var constructor = obj.constructor;
			  var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;

			  var prop = 'constructor';
			  if(_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);

			  while(nonEnumIdx--) {
			    prop = nonEnumerableProps[nonEnumIdx];
			    if(prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {
			    	console.log(obj[prop], constructor === obj.__proto__); 
			      keys.push(prop);
			    }
			  }
			}

			var Func = function() {}; 
			Func.prototype.toString = null;
			var obj = { constructor: Func };
			var keys = []
			collectNonEnumProps(obj, keys)
			console.log(keys)

			var compiled = _.template("he\'l\\lo: <%= name %>");
			console.log(compiled)
			console.log(compiled({name: 'moe'}))

			console.log(_.keys(_))
		}
	</script>	
</body>
</html>